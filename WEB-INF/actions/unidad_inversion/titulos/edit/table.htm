<html>
<head>
	<title>Sistema INFI</title>
	<LINK REL="stylesheet" type="text/css" href="../css/HojadeEstilo.css" />
	<LINK REL="stylesheet" type="text/css" href="../css/EstiloFichas.css" />
	<script language="javascript" src="../js/default.js"></script>	
	
	<script type="text/javascript">
        function mostrar(accion,tipo_producto){
        	
			if(accion==1){
				var elementos = document.getElementsByName('eliminar')
				for (var i = 0; i < elementos.length; i++ ){
					elementos[i].style.display ="block";
				}
				titulou.style.display ="block";
				unidad.style.display ="block";
				
				if(document.dataentry.buscar_tit_act.value=='true'){
					document.getElementById('botones_subasta_divisas').style.display='none'
					document.getElementById('unidad').style.display='block'
				}else{
					document.getElementById('botones_subasta_divisas').style.display='block'
					document.getElementById('unidad').style.display='none'
				}
			
			}
			if(accion==2){//Modulo Publicacion
				var inputs = document.getElementsByTagName('input')
				for (var i = 0; i < inputs.length; i++ ){
					inputs[i].disabled = true;
				}
				var textareas = document.getElementsByTagName('textarea')
				for (var i = 0; i < textareas.length; i++ ){
					textareas[i].disabled = true;
				}
				var selects = document.getElementsByTagName('select')
				for (var i = 0; i < selects.length; i++ ){
					selects[i].disabled = true;
				}
				titulop.style.display ="block";
				//publicar.style.display ="block";
			}
			if(accion==3){//Modulo Consulta
				var inputs = document.getElementsByTagName('input')
				for (var i = 0; i < inputs.length; i++ ){
					inputs[i].disabled = true;
				}
				var textareas = document.getElementsByTagName('textarea')
				for (var i = 0; i < textareas.length; i++ ){
					textareas[i].disabled = true;
				}
				var selects = document.getElementsByTagName('select')
				for (var i = 0; i < selects.length; i++ ){
					selects[i].disabled = true;
				}
				tituloc.style.display ="block";
			}	
			if(accion==4){//Modulo Modificacion
				if(tipo_producto=='SICAD2RED'||tipo_producto=='SICAD2PER'){
					
					var elementos = document.getElementsByName('eliminar')
					for (var i = 0; i < elementos.length; i++ ){
						elementos[i].style.display ="block";
					}
					titulou.style.display ="block";
					unidad.style.display ="block";
					
					if(document.dataentry.buscar_tit_act.value=='true'){
						document.getElementById('botones_subasta_divisas').style.display='none'
						document.getElementById('unidad').style.display='block'
					}else{
						document.getElementById('botones_subasta_divisas').style.display='block'
						document.getElementById('unidad').style.display='none'
					}
					
				}else{
					var inputs = document.getElementsByTagName('input')
					for (var i = 0; i < inputs.length; i++ ){
						inputs[i].disabled = true;
					}
					var textareas = document.getElementsByTagName('textarea')
					for (var i = 0; i < textareas.length; i++ ){
						textareas[i].disabled = true;
					}
					var selects = document.getElementsByTagName('select')
					for (var i = 0; i < selects.length; i++ ){
						selects[i].disabled = true;
					}
					titulom.style.display ="block";
				}
			}
		}
        
        function cargarCheckControlDisponible(){
        	for (i=0; i<document.forms[0].idTitulo.length; i++) {
        		if (document.forms[0].controlDisponible[i].value == '1') {			
        			document.forms[0].uititu_in_control_disponible[i].checked=true;			
        		}else{			
        			document.forms[0].uititu_in_control_disponible[i].checked=false;		
        		}
        	}
        }
		          
	</script>
	
</head>

<body
	ONLOAD="javascript:mostrar(@accion@,'@tipo_producto@');{if(parent.frames[1]&&parent.frames['sidebar'].Go)parent.frames['sidebar'].Go()};cargarCheckControlDisponible();" width="930px">

	<!--page name bar-->
	<table  border="0" cellspacing="0" WIDTH="930px">
	    <tr>
	        <td class="headerBox">
	        	<div id="titulou" style="display:none">               
	            	<font class="headerText">Unidad de Inversi&oacute;n</font>
	            </div>
				<div id="titulop" style="display:none">               
	            	<font class="headerText">Publicaci&oacute;n Unidad de Inversi&oacute;n</font>
	            </div>
	            <div id="tituloc" style="display:none">               
	            	<font class="headerText">Consulta Unidad de Inversi&oacute;n</font>
	            </div>
	            <div id="titulom" style="display:none">               
	            	<font class="headerText">Modificaci&oacute;n Unidad de Inversi&oacute;n</font>
	            </div>
			</td>
	        <!-- help online -->
	   		<td class="headerBox" valign="middle" align="right">
	   			<img border="0" src="../images/infi_gn_ayuda.gif" width="17" height="17" onclick="helpOpen(window.document.location.href);" style="cursor:hand" title="Mostrar ayuda en l&iacute;nea" >
	   		</td>
	   		<!-- fin help online -->	        
	   	</tr>
	</table>
	
	<br>
	
	
	<form name="dataentry" method="post" action="unidad_inversion_titulos-update">
		<input TYPE="hidden" name="idUnidadInversion" value="@undinv_id@" />
		<input type="hidden" name="origen" value="unidadinversion" />
		
	<div id="menu">
		<table border="0" cellspacing="1" cellpadding="2">
			<tr>
				<td id="navigation" nowrap><a href="unidad_inversion-edit"><span>Unidad de Inversi&oacute;n</span></a></td>			
				<td id="navigationActivo" nowrap><a><span>T&iacute;tulos / Subastas</span></a></td>
				<td id="navigation" nowrap><a href="unidad_inversion_blotter-browse"><span>Blotters</span></a></td>
				<td id="navigation" nowrap><a href="unidad_inversion_indicadores-edit"><span>Indicadores</span></a></td>
				<td id="navigation" nowrap><a href="unidad_inversion_empresas-browse"><span>Empresas</span></a></td>
				<td id="navigation" nowrap><a href="unidad_inversion_campos-edit"><span>Campos Din&aacute;micos</span></a></td>
				<td id="navigation" nowrap><a href="unidad_inversion_documentos-browse"><span>Documentos</span></a></td>
				<td id="navigation" nowrap><a href="unidad_inversion_comisiones-browse"><span>Comisiones</span></a></td>	
			</tr>
		</table>
	</div>

	<!--titulo-->
	<table class="datatable" border="0" cellspacing="1" cellpadding="2" width="930px">
		<tr class="formCaption">
			<th align="center">
				<font class="formCaptionText">
					T&iacute;tulos Asociados / Subastas Asociadas
					@total_records@
				</font>
			</th>
		</tr>
	</table>
		
	<!--tabla de data-->
	<table class="datatable" border="0" cellspacing="1" cellpadding="2" width="930px" style="TABLE-LAYOUT: auto; ">
	
		<!--encabezados de columna-->
		<tr class="tableHeader">
			<th width="5%" id="eliminar" style="display:none"></th>
			<th width="5%">IDB</th>
			<th width="5%">Control Monto Disponible</th>
			<th>Descripci&oacute;n</th>
			<th width="15%">Valor Nominal</th>	
			<th nowrap>Moneda de Denominaci&oacute;n</th>					
			<th width="10%">Valor Equivalente</th>
			<th width="8%">Porcentaje</th>		
		</tr>
	
		<!--data-->
		<tbody id="tLista">
		<rowsUIT>
		<tr class="tableCell">
			<td align="center" id="eliminar" style="display:none">
			
				<span style="cursor:hand; text-decoration:underline" title="Eliminar Asociacion Unidad de Inversion - Titulo"
					onclick="enviarA('delete','@titulo_id@')">
					<IMG SRC="../images/infi_gn_delete.gif" align="top" border="0">								 
				</span>
						
			</td>
			<td align="center">
				<INPUT TYPE="checkbox" VALUE="@uititu_in_conidb@" NAME="uititu_in_conidb"/>
			</td>		
			<td align="center">
				<INPUT TYPE="checkbox" VALUE="@uititu_in_control_disponible@" NAME="uititu_in_control_disponible"/>				
			</td>						
			<td nowrap>@titulo_descripcion@
			 	<input type="hidden" name="idTitulo" value="@titulo_id@" />
 				<input type="hidden" name="porcUITituloAnterior" value="@uititu_porcentaje@" />	
 				<input type="hidden" name="idb" value="@uititu_in_conidb@" />	
 				<input type="hidden" name="idbAnterior" value="@uititu_in_conidb@" />				
				<input type="hidden" name="idMoneda" value="@moneda_id@" /> 
				<input type="hidden" name="valorNominalAnterior" value="@valorNominalEdited@" />
				<input type="hidden" name="controlDisponible" value="@uititu_in_control_disponible@" />	
				<input type="hidden" name="controlDisponibleAnterior" value="@uititu_in_control_disponible@"/>					
			</td>
			<td align="right" style="padding-right=10px;"><div @mostrar_valor_nominal@>@valorNominalEdited@</div><input type="@editar_valor_nominal@" name="valorNominal" value="@valorNominalEdited@" /> </td>	
			<td align="center">@titulo_moneda_den@</td>	
			<td align="right" style="padding-right=10px;">@valorEquivalenteEdited@</td>			
			<td align="center">		
				<input type="text" name="porcUITitulo" size="10" maxlength="10" value="@uititu_porcentaje@"  
					onkeypress="EvaluateText('%f',this);" onblur="validar(this);" @readonly@/>
			</td>				
		</tr>
		</tbody>
		</rowsUIT>
		<tr class="tableCell">
			<td id="eliminar" style="display:none"></td>
			<td align="right"  colspan="4">
				@mensaje_ini@<font class="alerta">@texto_mensaje@</font>@mensaje_fin@
			</td>
			<td align="right" style="padding-right=10px;"><b>Unidad de Inversion</b></td>		
			<td align="right" style="padding-right=10px;">@undinv_umi_unidad@</td>
			<td align="right" style="padding-right=10px;">@totalporcentaje@</td>								
		</tr>	
	</table>
	
	<div align="center" style="width:930px;">@page_index@
	
	 	<input type="hidden" name="totalPorcentaje" value="@totalporcentaje@" />
	<!-- Campos complementarios para que siempre sea un arreglo -->
		<input type="hidden" name="selecc" name="0" />
	 	<input type="hidden" name="idTitulo" name="" />
		<input type="hidden" name="porcUITituloAnterior" value="" />
		<input type="hidden" name="valorNominal" value="" /> 	
		<input type="hidden" name="porcUITitulo" value=""   /> 	
		<input type="hidden" name="idMoneda" value=""   /> 						
		<INPUT TYPE="CHECKBOX" VALUE="" NAME="uititu_in_conidb"  style="display:none"/>
		<INPUT TYPE="CHECKBOX" VALUE="" NAME="uititu_in_control_disponible"  style="display:none"/>
		<input type="hidden" name="idb" value="" />
		<input type="hidden" name="idbAnterior" value="" />
		<input type="hidden" name="controlDisponible" value="" />	
		<input type="hidden" name="controlDisponibleAnterior" value="" />
		
		<input type="hidden" name="buscar_tit_act" value="@mostrar_busqueda_tit@" />
		<input type="hidden" name="inst_fin" value="@instrum_financ@" />

<div id="unidad" style="display:none">
		@boton_grabar_ini@	
		<button type="button" onclick="submitir();">Grabar</button>
		@boton_grabar_fin@			
		&nbsp;					
		<button type="button" name="agregar_titulo" onclick="agregar();">Agregar T&iacute;tulo</button>
</div>

<div id="botones_subasta_divisas" style="display:none">
		@boton_grabar_ini@		
		<button type="button" onclick="submitir();">Grabar</button>
		@boton_grabar_fin@			
		&nbsp;	
		<button type="button" name="agregar_subasta" onclick="agregarSubasta();">Agregar Subasta</button>
</div>
	</div>
	
	</form>
	
	<form name="dataentry1" method="post" action="unidad_inversion_titulos-edit">
		<input TYPE="hidden" name="idUnidadInversion" value="@undinv_id@" />
	 	<input type="hidden" name="idTitulo" name="" />		
	</form>

</body>

<script type="text/javascript">
<!--
function validar(fld) {
	if (fld.value == '') {
		alert("Debe colocar el Porcentaje");
		fld.focus();
	}
}
function enviarA(action, id) {
	document.forms[1].idTitulo.value = id;	
	if (action == 'view') {
		document.forms[1].action="unidad_inversion-view";	
		document.forms[1].submit();
		return;
	}
	if (! confirm('Desea eliminar la Asociacion con el Titulo seleccionada?')) {
		document.forms[1].selecc[nroOcurrs].checked = true;
		return;
	}
	document.forms[1].action="unidad_inversion_titulos-delete";	
	document.forms[1].submit();
	return;		
}

function submitir() {

	for (i=0; i<document.forms[0].idTitulo.length; i++) {
		if (document.forms[0].porcUITitulo[i].value == ''){
			document.forms[0].porcUITitulo[i].value = '0';
		}
		if (document.forms[0].uititu_in_conidb[i].checked) {
			document.forms[0].idb[i].value = '1';
			a=1;
		}else{
			document.forms[0].idb[i].value = '0';
			a=2;
		}
		if (document.forms[0].uititu_in_conidb[i].value == ''){
			document.forms[0].idb[i].value = '0';
			a=3;
		}		
		
		if (document.forms[0].uititu_in_control_disponible[i].checked) {			
			document.forms[0].controlDisponible[i].value = '1';			
		}else{			
			document.forms[0].controlDisponible[i].value = '0';		
		}
	}
   	document.forms[0].submit();
}

function agregar() {
	parm = "?entry=unidadinversion&idUnidadInversion=" + document.forms[0].idUnidadInversion.value;
	r = window.open('unidad_inversion_titulos-select' + parm,'picklist', 'resizable=yes,scrollbars=yes,width=720,height=650,top=50,left=150');
}

function agregarSubasta() {
	parm = "?entry=unidadinversion&idUnidadInversion=" + document.forms[0].idUnidadInversion.value;
	r = window.open('unidad_inversion_titulos-agregar_subasta' + parm,'picklist', 'resizable=yes,scrollbars=yes,width=720,height=300,top=50,left=150');
}

function reload(){
	document.forms[1].submit();
}
-->
</script>
</html>

